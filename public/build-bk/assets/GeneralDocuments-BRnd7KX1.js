import{W as k,r as d,j as e}from"./app-Dua9E37O.js";import"./SelectInput-ByoqYoTU.js";import I from"./Dashboard-DatwvVPW.js";import{ApplicationLayout as V}from"./ApplicationLayout-ZYWLnT7R.js";import{M as P}from"./Modal-BH2AXVDb.js";import{I as S}from"./InputLabel-CKWKhzbh.js";import{T as _}from"./TextareaInput-CxZk8yxh.js";import{I as E}from"./InputError-ByHvJBQW.js";import{S as q}from"./SecondaryButton-CWqNjcUs.js";import{F as f,f as b}from"./index-DB2y4TTu.js";import"./AuthenticatedLayout-IZYydvq6.js";import"./ApplicationLogo-BgesrP0X.js";import"./ResponsiveNavLink-ByNM-lV1.js";import"./transition-DG8urZhM.js";import"./ApplicationHeader-CjB_Va0g.js";import"./index-D8bVqLcy.js";function se({auth:n,company_info:r,children:A}){const{data:l,setData:u,post:B,put:N,processing:w,errors:v,reset:M}=k({application_form_field_id:null,description:null,status:null}),[y,m]=d.useState(!1),[s,F]=d.useState({}),[t,R]=d.useState({});d.useEffect(()=>{r&&((r==null?void 0:r.application_fields)||[]).forEach(o=>{const{application_form_field_name:D,application_form_field_value:x,id:p,varification_status:h,agent_id:g,description:j}=o;switch(D){case"Business Plan":F({id:p,value:x,status:h,agent_id:g,description:j});break;case"Other Document":R({id:p,value:x,status:h,agent_id:g,description:j});break}})},[r]);const i=(a,o)=>{l.status=a,l.application_form_field_id=o,l.description=null,m(!0)},c=()=>{m(!1)},C=a=>{a.preventDefault(),u("description",a.target.value),N(route("admin.dashboard.viewrequestupdate",{id:r.id}),{onSuccess:()=>{c()}})};return e.jsxs(I,{auth:n.user,children:[e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-4",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-10",children:e.jsxs("div",{className:"flex flex-col justify-between px-4 sm:px-0",children:[e.jsxs("div",{className:"w-4/5",children:[e.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"Applicant Information"}),e.jsx("p",{className:"max-w-2xl mt-1 text-sm leading-6 text-gray-500",children:"Personal details and application."})]}),e.jsx(V,{company_id:r==null?void 0:r.id,rejected_fields_count:r==null?void 0:r.rejected_fields_count,children:e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"flex items-center border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("div",{className:"w-full font-semibold",children:"Business Plan"}),e.jsx("div",{className:"w-full",children:e.jsx("a",{href:s.value,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"View Document"})}),s.status==="Rejected"?e.jsxs("p",{className:"w-full text-yellow-500",children:[e.jsx(f,{icon:b,className:"w-2 h-2 p-1 text-sm text-white bg-yellow-500 rounded-full"})," ",s.description," "]}):""]}),e.jsx("div",{className:"w-1/2",children:e.jsx("div",{className:"flex justify-end gap-2",children:n.user.id!==parseInt(s.agent_id)?e.jsx(e.Fragment,{children:s.status==="Under Review"?e.jsx("p",{className:"px-4 py-2 m-2 text-green-100 rounded-lg bg-yellow-500",children:s.status}):e.jsx("p",{className:"px-4 py-2 m-2 text-green-100 rounded-lg"+(s.status==="Verified"?" bg-green-600":" bg-red-600"),children:s.status})}):e.jsx(e.Fragment,{children:s.status==="Under Review"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"px-4 py-2 m-2 text-green-100 bg-green-600 rounded-lg",onClick:()=>i("Verified",s.id),children:"Confirm"}),e.jsx("button",{className:"px-4 py-2 m-2 text-red-100 bg-red-600 rounded-lg",onClick:()=>i("Rejected",s.id),children:"Rejected"})]}):e.jsx("p",{className:"px-4 py-2 m-2 text-green-100 rounded-lg"+(s.status==="Verified"?" bg-green-600":" bg-red-600"),children:s.status})})})})]},s.id),e.jsxs("div",{className:"flex items-center border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("div",{className:"w-full font-semibold",children:"Other Document"}),e.jsx("div",{className:"w-full",children:e.jsx("a",{href:t.value,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"View Document"})}),t.status==="Rejected"?e.jsxs("p",{className:"w-full text-yellow-500",children:[e.jsx(f,{icon:b,className:"w-2 h-2 p-1 text-sm text-white bg-yellow-500 rounded-full"})," ",t.description," "]}):""]}),e.jsx("div",{className:"w-1/2",children:e.jsx("div",{className:"flex justify-end gap-2",children:n.user.id!==parseInt(t.agent_id)?e.jsx(e.Fragment,{children:t.status==="Under Review"?e.jsx("p",{className:"px-4 py-2 m-2 text-green-100 rounded-lg bg-yellow-500",children:t.status}):e.jsx("p",{className:"px-4 py-2 m-2 text-green-100 rounded-lg"+(t.status==="Verified"?" bg-green-600":" bg-red-600"),children:t.status})}):e.jsx(e.Fragment,{children:t.status==="Under Review"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"px-4 py-2 m-2 text-green-100 bg-green-600 rounded-lg",onClick:()=>i("Verified",t.id),children:"Confirm"}),e.jsx("button",{className:"px-4 py-2 m-2 text-red-100 bg-red-600 rounded-lg",onClick:()=>i("Rejected",t.id),children:"Rejected"})]}):e.jsx("p",{className:"px-4 py-2 m-2 text-green-100 rounded-lg"+(t.status==="Verified"?" bg-green-600":" bg-red-600"),children:t.status})})})})]},t.id)]})})]})})})})}),e.jsx(P,{show:y,onClose:c,children:e.jsxs("form",{onSubmit:C,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Are you sure you want to change the status?"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:l.status=="Verified"?"Please confirm that you want to approve this request.":"Please enter your reason to reject this request."}),l.status=="Rejected"?e.jsxs("div",{className:"mt-6",children:[e.jsx(S,{htmlFor:"password",value:"Password",className:"sr-only"}),e.jsx(_,{id:"description",name:"description",value:l.description?l.description:"",onChange:a=>u("description",a.target.value),required:!0,autoFocus:!0,className:"block w-full mt-1",autoComplete:"current-description",placeholder:"Description"}),e.jsx(E,{message:v.company_status,className:"mt-2"})]}):e.jsx(e.Fragment,{}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx(q,{onClick:c,children:"Cancel"}),e.jsx("button",{className:"ms-3 py-4 px-6 rounded-full text-white "+(l.status=="Rejected"?"bg-red-600":"bg-secondary"),disabled:w,children:l.status})]})]})})]})}export{se as default};
