import{W as D,r as u,j as e,y as E}from"./app-Dua9E37O.js";import{I as _}from"./InputError-ByHvJBQW.js";import{I as w}from"./InputLabel-CKWKhzbh.js";import{P as B}from"./PrimaryButton-HjmmXOXh.js";import{S as M}from"./SecondaryButton-CWqNjcUs.js";import{T as b}from"./TextInput-DGpXq45j.js";import{S as T}from"./StepFormLayout-vbgq4JfO.js";import P from"./CustomerDashboard-B2alh1Ve.js";import A from"./FoundersList-Di3SOd3n.js";import"./index-DB2y4TTu.js";import"./index-D8bVqLcy.js";import"./index-V2IMY_GO.js";import"./index-C_BJzd5s.js";import"./floating-ui.dom-DGhbMe_T.js";import"./ResponsiveNavLink-ByNM-lV1.js";import"./transition-DG8urZhM.js";import"./FounderAuthenticatedLayout-GP-4rY9Y.js";import"./ApplicationLogo-BgesrP0X.js";import"./add-more-LctGyofc.js";function ne({company_info:a,auth:v,step:y,foundersList:m,totalSplits:c,registration_completed_step:S,company_count:j}){const{data:n,setData:f,post:x,processing:h,errors:g,reset:O,delete:R}=D({first_name:"",last_name:"",founder_list:[],company_id:a.id}),[o,N]=u.useState(0),[i,d]=u.useState(m);u.useEffect(()=>{const r=m.map(t=>(t.ownership_percentage===null&&(t={...t,ownership_percentage:0}),t));var l=parseInt(c);N(l),d(r)},[m,c]);const F=r=>{r.preventDefault(),x(route("founder.dashboard.founderstore",{id:a.id})),n.first_name="",n.last_name=""},I=r=>{r.preventDefault(),n.founder_list=i,x(route("founder.dashboard.founderssplitstore",{id:a.id}))},L=()=>{E.get(route("founder.dashboard.companydetails",n.company_id))},k=(r,l)=>{if(l<0)return 0;var t=0;const p=i.map(s=>s.id===r?(s={...s,ownership_percentage:parseInt(l)},t=parseInt(t||0)+parseInt(s.ownership_percentage?s.ownership_percentage:0),s):(t=parseInt(t||0)+parseInt(s.ownership_percentage?s.ownership_percentage:0),s));N(parseInt(t)),d(p)},C=r=>{const l=i.map(t=>{var p=t.manager=="No Manager"?"Manager":"No Manager";return t.id===r&&(t={...t,manager:p}),t});d(l)};return e.jsx(P,{company_info:a,auth:v,company_count:j,children:e.jsxs(T,{step:y,filledSteps:S,company_id:a.id,children:[e.jsx("h2",{className:"text-2xl font-extrabold ",children:"Founders & Ownership"}),e.jsx("p",{className:"mt-4 mb-6 text-sm text-gray-500",children:"Enter the legal name of the founders, split the company between the founders and select managers"}),e.jsxs("form",{onSubmit:F,className:"flex flex-col items-start gap-2 md:flex-row",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(w,{htmlFor:"first_name",className:"text-lg",value:"First Name"}),e.jsx(b,{id:"first_name",name:"first_name",value:n.first_name,className:"block w-full py-4 mt-1 bg-transparent",autoComplete:"first_name",placeholder:"First Name",onChange:r=>f("first_name",r.target.value)}),e.jsx(_,{message:g.first_name,className:"mt-2"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(w,{htmlFor:"last_name",className:"text-lg",value:"Last Name"}),e.jsx(b,{id:"last_name",name:"last_name",value:n.last_name,className:"block w-full py-4 mt-1 bg-transparent",autoComplete:"last_name",placeholder:"Last Name",onChange:r=>f("last_name",r.target.value)}),e.jsx(_,{message:g.last_name,className:"mt-2"})]}),e.jsx("div",{className:"w-auto md:pt-7",children:e.jsx("button",{className:"px-10 py-4 mt-1 text-center text-black bg-transparent border border-gray-300 rounded-full secondary-button",disabled:h,children:"Add"})})]}),e.jsxs("div",{className:"flex items-center justify-between pb-4 mt-10",children:[e.jsx("p",{className:"font-bold",children:"Split the ownership between the founders"}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("div",{className:"w-auto text-center border px-4 rounded"+(o==100?" border-green-500 text-green-500 bg-green-200":" border-red-500 text-red-500 bg-red-200"),children:e.jsxs("span",{children:[o,"% out of 100%"]})})})]}),e.jsxs("form",{onSubmit:I,children:[e.jsx(A,{founderSplitList:i,updateSplit:k,updateManager:C,company_id:a.id}),e.jsxs("div",{className:"flex items-center justify-start gap-2 mt-4",children:[e.jsx(M,{className:"justify-center text-center",disabled:h,onClick:L,children:"Back"}),e.jsx(B,{className:"justify-center w-full text-center",disabled:o!=100,children:"Continue"})]})]})]})})}export{ne as default};
